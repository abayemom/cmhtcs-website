<!--page for existing students registration online-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="stylesheet" href="/css/registrations.css">
</head>
<body>
    <div class="container">
        <form id="registrationForm" enctype="multipart/form-data">
            <!-- your form fields here -->
            <label for="firstname">Enter Your Full Name:</label><br>
            <input type="text" class="text" id="firstname" name="firstname" placeholder="First Name" required><br>
            <input class="text" type="text" id="middlename" name="middlename" placeholder="Middle Name"><br>
            <input class="text" type="text" id="lastname" name="lastname" placeholder="Last Name" required><br>
            
            <label for="lygrade">Your last year grade:</label><br>
            <input class="text" type="number" id="lyg" name="lyg" placeholder="Last year grade" required><br>
            
            <label for="lysection">Your last year section:</label><br>
            <input class="text" type="text" id="lysection" name="lysection" placeholder="Last year section" required><br>
            
            <label for="grade">This year grade:</label><br>
            <input class="text" type="number" placeholder="This year grade" id="grade" name="grade" required><br>
            
            <label for="gender">Gender:</label><br>
            <select id="gender" name="gender" required>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select><br>
            
            <label for="age">Age:</label><br>
            <input class="text" type="number" id="age" name="age" placeholder="Age" required><br>
            
          <label for="phone">Phone:</label><br>        
          <input class="text" type="number" id="phone" name="phone" placeholder="phone" required><br>
            
            <label for="photo">Upload Your Last year report card(transcript):</label><br>
            <input type="file" id="photo" name="reportCard" accept="image/*" required><br>
          
            <label for="studentphoto">Upload Student Photo:</label><br>          
            <input type="file" id="studentphoto" name="photo" accept="image/*" required><br>
          
            <label for="paymentconfirmation">Upload Payment Confirmation:</label><br>         
            <input type="file" id="paymentconfirmation" name="paymentconfirmation" accept="image/*" required><br>

            <button type="button" class="btn btn-primary" onclick="submitForm()" id="submitButton">Submit</button>
        </form>
    </div>

    <script>
        function submitForm() {
            var button = document.getElementById('submitButton');
            button.innerHTML = 'Submitting';
            button.classList.add('submitting');

            var form = document.getElementById("registrationForm");
            var formData = new FormData(form);

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "registration.php", true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    button.innerHTML = 'Submit';
                    button.classList.remove('submitting');

                    if (xhr.status === 200) {
                        var response = JSON.parse(xhr.responseText);
                        handleResponse(response);
                    } else {
                        console.error("Error:", xhr.status);
                        // Handle error
                    }
                }
            };
            xhr.send(formData);
        }

        function handleResponse(response) {
            if (response.success) {
                swal("Data sent successfully", "we will notify you by SMS.", "success")
                .then(() => {
                    // Reset the form
                    document.getElementById("registrationForm").reset();
                });
            } else {
                swal("Registration Error", response.message, "error")
                .then(() => {
                    // Reset the form
                    document.getElementById("registrationForm").reset();
                });
            }
        }
    </script>
</body>
</html>
